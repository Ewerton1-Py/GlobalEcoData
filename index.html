<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research Contributions</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        /* Flexbox container for form and map */
        .container {
            display: flex;
            justify-content: space-between; /* Space between items */
            align-items: flex-start; /* Align items at the start */
        }
        /* Style for the form */
        .form-container {
            width: 50%; /* Adjust width as needed */
            padding-right: 20px; /* Space between form and map */
        }
        /* Style for the map */
        #map {
            height: 500px; /* Set height for the map */
            width: 50%; /* Adjust width as needed */
        }
    </style>
</head>
<body>
    <h1>Submit Your Research</h1>
    <div class="container">
        <div class="form-container">
            <p>We welcome contributions from researchers. Please fill out the form below:</p>
            <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdiFE37CTDu1TJE_QfzY_tVGj0UO57Fn3wIBl2oEIV4Z0OlIg/viewform?embedded=true" width="100%" height="1357" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>

            <h2>Add Research Entry</h2>
            <label for="link">Link to Research Paper:</label>
            <input type="text" id="link" placeholder="Enter research paper link" />

            <label for="analyte">Select Analyte:</label>
            <select id="analyte">
                <option value="pah">PAH</option>
                <option value="alkanes">Alkanes</option>
                <option value="sterols">Sterols</option>
                <option value="pesticides">Pesticides</option>
            </select>

            <label for="environment">Select Environment:</label>
            <select id="environment">
                <option value="water">Water</option>
                <option value="soil">Soil</option>
                <option value="sediment">Sediment</option>
                <option value="groundwater">Ground Water</option>
                <option value="surficial">Surficial Particulate Matter</option>
            </select>

            <label for="coordinates">Coordinates (lat,long):</label>
            <input type="text" id="coordinates" placeholder="e.g., 34.0522,-118.2437" />

            <button id="addEntry">Add Entry to Map</button>
        </div>

        <div id="map"></div> <!-- Map on the right -->
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Initialize the map
        var map = L.map('map').setView([20, 0], 2); // Centered globally

        // Add OpenStreetMap tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '© OpenStreetMap'
        }).addTo(map);

        // Example locations (latitude, longitude, title, and link)
        var locations = [
            { coords: [34.0522, -118.2437], title: 'Los Angeles', link: 'paper1.html' },
            { coords: [51.5074, -0.1278], title: 'London', link: 'paper2.html' },
            { coords: [35.6895, 139.6917], title: 'Tokyo', link: 'paper3.html' },
        ];

        // Function to add markers to the map
        function addMarkers() {
            locations.forEach(function(location) {
                var marker = L.marker(location.coords).addTo(map);
                marker.bindPopup(`<a href="${location.link}" target="_blank">${location.title}</a>`);
            });
        }

        // Add new entry to the map
        document.getElementById('addEntry').addEventListener('click', function() {
            var link = document.getElementById('link').value;
            var analyte = document.getElementById('analyte').value;
            var environment = document.getElementById('environment').value;
            var coordinates = document.getElementById('coordinates').value.split(',');

            if (coordinates.length === 2) {
                var lat = parseFloat(coordinates[0]);
                var long = parseFloat(coordinates[1]);
                var marker = L.marker([lat, long]).addTo(map);
                marker.bindPopup(`<a href="${link}" target="_blank">${analyte} in ${environment}</a>`);

                // Optionally, you can add the new location to the locations array
                locations.push({ coords: [lat, long], title: analyte, link: link });

                // Clear input fields
                document.getElementById('link').value = '';
                document.getElementById('coordinates').value = '';
            } else {
                alert('Please enter valid coordinates in the format: lat,long');
            }
        });

        addMarkers();
    </script>
</body>
</html>
